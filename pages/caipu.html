<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>菜谱详情 - 饭了么</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css\caipu.css">
    <style>
        /* 新增的样式 */
        .ingredient-link {
            margin-left: 10px;
            font-size: 12px;
            color: var(--primary-color);
            cursor: pointer;
            text-decoration: underline;
        }
        .buy-all-btn {
            margin-top: 15px;
            width: 100%;
        }
    </style>
</head>
<body>
    <!-- 头部导航 -->
    <header class="header">
        <div class="nav-container">
            <a href="#" class="logo">
                <i class="fas fa-carrot"></i> 饭了么
            </a>
            
            <div class="nav-links">
                <a href="#" style="color: var(--primary-color);">食谱</a>
                <a href="#">商城</a>
                <a href="#">我的</a>
            </div>
            
            <button class="back-btn" onclick="goBack()">
                <i class="fas fa-arrow-left"></i> 返回
            </button>
        </div>
    </header>

    <!-- 主内容 -->
    <main class="main-content">
        <!-- 菜谱头部信息 -->
        <div class="recipe-header">
            <div class="recipe-image-container">
                <img src="images/fanqiedan.jpeg" alt="番茄炒蛋" id="recipe-image">
                <div class="recipe-badge" id="recipe-badge">100% 匹配</div>
            </div>
            
            <div class="recipe-info">
                <h1 class="recipe-title" id="recipe-title">番茄炒蛋</h1>
                <p class="recipe-description" id="recipe-description">
                    经典的家常菜，酸甜可口，营养丰富。番茄的酸甜配上嫩滑的鸡蛋，是每个中国人都熟悉的味道。制作简单，适合初学者。
                </p>
                
                <div class="recipe-meta-grid">
                    <div class="meta-card">
                        <i class="fas fa-clock"></i>
                        <div class="meta-label">制作时间</div>
                        <div class="meta-value" id="cook-time">15分钟</div>
                    </div>
                    
                    <div class="meta-card">
                        <i class="fas fa-tachometer-alt"></i>
                        <div class="meta-label">难度等级</div>
                        <div class="meta-value" id="difficulty">简单</div>
                    </div>
                    
                    <div class="meta-card">
                        <i class="fas fa-users"></i>
                        <div class="meta-label">适合人数</div>
                        <div class="meta-value" id="servings">2-3人</div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" id="start-cooking">
                        <i class="fas fa-play"></i> 开始制作
                    </button>
                    <button class="btn btn-outline" id="favorite-btn">
                        <i class="fas fa-heart"></i> 收藏
                    </button>
                    <button class="btn btn-secondary" id="share-btn">
                        <i class="fas fa-share"></i> 分享
                    </button>
                </div>
            </div>
        </div>

        <!-- 食材和营养信息 -->
        <div class="content-grid">
            <div class="content-card">
                <h3><i class="fas fa-apple-alt"></i> 所需食材</h3>
                <ul class="ingredients-list" id="ingredients-list">
                    <li>
                        <span class="ingredient-name">鸡蛋</span>
                        <span class="ingredient-amount">3个</span>
                        <span class="ingredient-link" onclick="goToMall('鸡蛋')">去购买</span>
                    </li>
                    <li>
                        <span class="ingredient-name">番茄</span>
                        <span class="ingredient-amount">2个（约300g）</span>
                        <span class="ingredient-link" onclick="goToMall('番茄')">去购买</span>
                    </li>
                    <li>
                        <span class="ingredient-name">食用油</span>
                        <span class="ingredient-amount">适量</span>
                        <span class="ingredient-link" onclick="goToMall('食用油')">去购买</span>
                    </li>
                    <li>
                        <span class="ingredient-name">盐</span>
                        <span class="ingredient-amount">适量</span>
                        <span class="ingredient-link" onclick="goToMall('盐')">去购买</span>
                    </li>
                    <li>
                        <span class="ingredient-name">白糖</span>
                        <span class="ingredient-amount">1茶匙</span>
                        <span class="ingredient-link" onclick="goToMall('白糖')">去购买</span>
                    </li>
                    <li>
                        <span class="ingredient-name">葱花</span>
                        <span class="ingredient-amount">少许（可选）</span>
                        <span class="ingredient-link" onclick="goToMall('葱花')">去购买</span>
                    </li>
                </ul>
                <button class="btn btn-primary buy-all-btn" onclick="buyAllIngredients()">
                    <i class="fas fa-shopping-cart"></i> 一键购买所有食材
                </button>
            </div>
            
            <div class="content-card">
                <h3><i class="fas fa-chart-bar"></i> 营养信息</h3>
                <div class="nutrition-grid">
                    <div class="nutrition-item">
                        <div class="nutrition-value">285</div>
                        <div class="nutrition-label">卡路里</div>
                    </div>
                    <div class="nutrition-item">
                        <div class="nutrition-value">18g</div>
                        <div class="nutrition-label">蛋白质</div>
                    </div>
                    <div class="nutrition-item">
                        <div class="nutrition-value">12g</div>
                        <div class="nutrition-label">脂肪</div>
                    </div>
                    <div class="nutrition-item">
                        <div class="nutrition-value">15g</div>
                        <div class="nutrition-label">碳水化合物</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 制作步骤 -->
        <div class="steps-section">
            <h3><i class="fas fa-list-ol"></i> 制作步骤</h3>
            <ol class="steps-list">
                <li class="step-item">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4 class="step-title">准备食材</h4>
                        <p class="step-description">
                            将鸡蛋打散，加入少许盐调味。番茄用开水烫一下，去皮切块。葱洗净切成葱花备用。
                        </p>
                        <div class="step-tip">
                            <i class="fas fa-lightbulb"></i>
                            <strong>小贴士：</strong>番茄去皮后炒制会更加顺滑，口感更好。
                        </div>
                    </div>
                </li>
                
                <li class="step-item">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4 class="step-title">炒制鸡蛋</h4>
                        <p class="step-description">
                            热锅下油，油热后倒入蛋液，快速炒散成蛋花，盛起备用。注意不要炒得太老。
                        </p>
                        <div class="step-tip">
                            <i class="fas fa-lightbulb"></i>
                            <strong>小贴士：</strong>鸡蛋要嫩滑，火候很重要，七八分熟即可。
                        </div>
                    </div>
                </li>
                
                <li class="step-item">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4 class="step-title">炒制番茄</h4>
                        <p class="step-description">
                            重新起锅，下少许油，放入番茄块炒制，炒至番茄出汁，加入白糖调味。
                        </p>
                        <div class="step-tip">
                            <i class="fas fa-lightbulb"></i>
                            <strong>小贴士：</strong>番茄要充分炒出汁水，这样做出的菜才会有浓郁的番茄味。
                        </div>
                    </div>
                </li>
                
                <li class="step-item">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4 class="step-title">合并炒制</h4>
                        <p class="step-description">
                            将炒好的鸡蛋倒入锅中，与番茄一起翻炒均匀，调入适量盐，撒上葱花即可出锅。
                        </p>
                        <div class="step-tip">
                            <i class="fas fa-lightbulb"></i>
                            <strong>小贴士：</strong>最后合并时不要炒制过久，保持鸡蛋的嫩滑口感。
                        </div>
                    </div>
                </li>
            </ol>
        </div>

        <!-- 制作小贴士 -->
        <div class="tips-section">
            <h3><i class="fas fa-lightbulb"></i> 制作小贴士</h3>
            <div class="tips-grid">
                <div class="tip-card">
                    <h4>选材技巧</h4>
                    <p>选择新鲜的鸡蛋和成熟度适中的番茄，番茄要选择红色饱满、手感稍软的，这样做出来的菜口感更好。</p>
                </div>
                
                <div class="tip-card">
                    <h4>火候控制</h4>
                    <p>炒鸡蛋时要用大火快炒，保持嫩滑；炒番茄时用中火，让番茄慢慢出汁，释放更多的味道。</p>
                </div>
                
                <div class="tip-card">
                    <h4>调味秘诀</h4>
                    <p>加入一点白糖能够中和番茄的酸味，让整道菜的口感更加平衡。盐要在最后加，避免鸡蛋出水。</p>
                </div>
                
                <div class="tip-card">
                    <h4>营养搭配</h4>
                    <p>番茄富含维生素C和番茄红素，鸡蛋含有优质蛋白质，两者搭配营养互补，是很好的家常菜选择。</p>
                </div>
            </div>
        </div>

        <!-- 评价区域 -->
        <div class="rating-section">
            <div class="rating-header">
                <h3><i class="fas fa-star"></i> 用户评价</h3>
                <div class="rating-stats">
                    <div class="rating-score">4.8</div>
                    <div class="rating-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="rating-count">基于 1,234 个评价</div>
                </div>
            </div>
            
            <div class="rating-form">
                <h4>为这道菜打分</h4>
                <div class="star-rating" id="star-rating">
                    <i class="fas fa-star" data-rating="1"></i>
                    <i class="fas fa-star" data-rating="2"></i>
                    <i class="fas fa-star" data-rating="3"></i>
                    <i class="fas fa-star" data-rating="4"></i>
                    <i class="fas fa-star" data-rating="5"></i>
                </div>
                <textarea placeholder="分享你的制作心得或改进建议..." id="review-text"></textarea>
                <button class="btn btn-primary" id="submit-review">
                    <i class="fas fa-paper-plane"></i> 提交评价
                </button>
            </div>
        </div>
    </main>

    <script>
        // 页面数据
        const recipeData = {
            '番茄炒蛋': {
                title: '番茄炒蛋',
                image: 'images/fanqiedan.jpeg',
                description: '经典的家常菜，酸甜可口，营养丰富。番茄的酸甜配上嫩滑的鸡蛋，是每个中国人都熟悉的味道。制作简单，适合初学者。',
                cookTime: '15分钟',
                difficulty: '简单',
                servings: '2-3人',
                badge: '100% 匹配',
                ingredients: [
                    { name: '鸡蛋', amount: '3个' },
                    { name: '番茄', amount: '2个（约300g）' },
                    { name: '食用油', amount: '适量' },
                    { name: '盐', amount: '适量' },
                    { name: '白糖', amount: '1茶匙' },
                    { name: '葱花', amount: '少许（可选）' }
                ],
                nutrition: [
                    { value: '285', label: '卡路里' },
                    { value: '18g', label: '蛋白质' },
                    { value: '12g', label: '脂肪' },
                    { value: '15g', label: '碳水化合物' }
                ],
                steps: [
                    {
                        title: '准备食材',
                        description: '将鸡蛋打散，加入少许盐调味。番茄用开水烫一下，去皮切块。葱洗净切成葱花备用。',
                        tip: '番茄去皮后炒制会更加顺滑，口感更好。'
                    },
                    {
                        title: '炒制鸡蛋',
                        description: '热锅下油，油热后倒入蛋液，快速炒散成蛋花，盛起备用。注意不要炒得太老。',
                        tip: '鸡蛋要嫩滑，火候很重要，七八分熟即可。'
                    },
                    {
                        title: '炒制番茄',
                        description: '重新起锅，下少许油，放入番茄块炒制，炒至番茄出汁，加入白糖调味。',
                        tip: '番茄要充分炒出汁水，这样做出的菜才会有浓郁的番茄味。'
                    },
                    {
                        title: '合并炒制',
                        description: '将炒好的鸡蛋倒入锅中，与番茄一起翻炒均匀，调入适量盐，撒上葱花即可出锅。',
                        tip: '最后合并时不要炒制过久，保持鸡蛋的嫩滑口感。'
                    }
                ],
                tips: [
                    {
                        title: '选材技巧',
                        content: '选择新鲜的鸡蛋和成熟度适中的番茄，番茄要选择红色饱满、手感稍软的，这样做出来的菜口感更好。'
                    },
                    {
                        title: '火候控制',
                        content: '炒鸡蛋时要用大火快炒，保持嫩滑；炒番茄时用中火，让番茄慢慢出汁，释放更多的味道。'
                    },
                    {
                        title: '调味秘诀',
                        content: '加入一点白糖能够中和番茄的酸味，让整道菜的口感更加平衡。盐要在最后加，避免鸡蛋出水。'
                    },
                    {
                        title: '营养搭配',
                        content: '番茄富含维生素C和番茄红素，鸡蛋含有优质蛋白质，两者搭配营养互补，是很好的家常菜选择。'
                    }
                ],
                rating: {
                    score: 4.8,
                    count: 1234
                }
            }
        };

        // 返回按钮功能
        function goBack() {
            window.history.back();
        }

        // 跳转到商城页面
        function goToMall(ingredient) {
            alert(`即将跳转到商城购买: ${ingredient}`);
            // 实际应用中这里应该跳转到商城页面，并携带食材参数
            // window.location.href = `/mall?search=${encodeURIComponent(ingredient)}`;
        }

        // 一键购买所有食材
        function buyAllIngredients() {
            const ingredients = recipeData['番茄炒蛋'].ingredients.map(item => item.name).join(', ');
            alert(`即将跳转到商城购买所有食材: ${ingredients}`);
            // 实际应用中这里应该跳转到商城页面，并携带所有食材参数
            // window.location.href = '/mall/cart?items=' + encodeURIComponent(JSON.stringify(recipeData['番茄炒蛋'].ingredients));
        }

        // 收藏按钮功能
        const favoriteBtn = document.getElementById('favorite-btn');
        favoriteBtn.addEventListener('click', function() {
            this.classList.toggle('active');
            if (this.classList.contains('active')) {
                this.innerHTML = '<i class="fas fa-heart"></i> 已收藏';
                this.classList.remove('btn-outline');
                this.classList.add('btn-primary');
            } else {
                this.innerHTML = '<i class="fas fa-heart"></i> 收藏';
                this.classList.remove('btn-primary');
                this.classList.add('btn-outline');
            }
        });

        // 评分功能
        const stars = document.querySelectorAll('.star-rating i');
        stars.forEach(star => {
            star.addEventListener('click', function() {
                const rating = parseInt(this.getAttribute('data-rating'));
                stars.forEach((s, index) => {
                    if (index < rating) {
                        s.classList.add('active');
                    } else {
                        s.classList.remove('active');
                    }
                });
            });
        });

        // 提交评价功能
        const submitReview = document.getElementById('submit-review');
        submitReview.addEventListener('click', function() {
            const reviewText = document.getElementById('review-text').value;
            const activeStars = document.querySelectorAll('.star-rating i.active').length;
            
            if (activeStars === 0) {
                alert('请先评分！');
                return;
            }
            
            if (reviewText.trim() === '') {
                alert('请输入评价内容！');
                return;
            }
            
            alert(`感谢您的评价！您给了${activeStars}星评价。`);
            document.getElementById('review-text').value = '';
            stars.forEach(star => star.classList.remove('active'));
        });

        // 开始制作功能
        const startCooking = document.getElementById('start-cooking');
        startCooking.addEventListener('click', function() {
            alert('开始制作番茄炒蛋！祝您烹饪愉快！');
        });

        // 分享功能
        const shareBtn = document.getElementById('share-btn');
        shareBtn.addEventListener('click', function() {
            alert('已复制菜谱链接到剪贴板，可以分享给朋友了！');
            // 实际应用中这里应该使用Web Share API或复制到剪贴板
        });
    </script>
</body>
</html>